# Production deployment configuration
# Usage: sam deploy --config-env prod
# More information: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-config.html

version = 0.1

[prod.global.parameters]
stack_name = "Cachao-prod"

[prod.build.parameters]
cached = true
parallel = true

[prod.validate.parameters]

[prod.deploy.parameters]
capabilities = "CAPABILITY_IAM"
confirm_changeset = true
resolve_s3 = true
region = "eu-west-1"
profile = "personal"
# Use parameter overrides for production values
# IMPORTANT: Replace these placeholder values with your actual production values
parameter_overrides = [
    "Environment=prod",
    "DatabaseHost=YOUR_PROD_RDS_ENDPOINT_HERE",
    "DatabaseUser=YOUR_PROD_DB_USER",
    "DatabasePassword=YOUR_PROD_DB_PASSWORD",
    "StripeSecretKey=YOUR_PROD_STRIPE_SECRET_KEY",
    "StripeWebhookSecret=YOUR_PROD_STRIPE_WEBHOOK_SECRET",
    "AviationStackApiKey=YOUR_AVIATIONSTACK_KEY",
    "AirLabsApiKey=YOUR_AIRLABS_KEY",
    "StripePartnerEventBusName=YOUR_STRIPE_PARTNER_BUS_NAME"
]

[prod.package.parameters]
resolve_s3 = true

# Staging environment (optional)
[staging.global.parameters]
stack_name = "Cachao-staging"

[staging.build.parameters]
cached = true
parallel = true

[staging.deploy.parameters]
capabilities = "CAPABILITY_IAM"
confirm_changeset = true
resolve_s3 = true
region = "eu-west-1"
profile = "personal"
parameter_overrides = [
    "Environment=staging",
    "DatabaseHost=YOUR_STAGING_RDS_ENDPOINT_HERE",
    "DatabaseUser=YOUR_STAGING_DB_USER",
    "DatabasePassword=YOUR_STAGING_DB_PASSWORD",
    "StripeSecretKey=YOUR_TEST_STRIPE_SECRET_KEY",
    "StripeWebhookSecret=YOUR_TEST_STRIPE_WEBHOOK_SECRET",
    "AviationStackApiKey=YOUR_AVIATIONSTACK_KEY",
    "AirLabsApiKey=YOUR_AIRLABS_KEY"
]
